<Window x:Class="SkoprRecord.App.Views.SettingsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:shell="clr-namespace:System.Windows.Shell;assembly=PresentationFramework"
        Title="Ayarlar" Height="480" Width="500"
        WindowStyle="None" ResizeMode="NoResize"
        AllowsTransparency="True" Background="Transparent"
        WindowStartupLocation="CenterOwner">

    <shell:WindowChrome.WindowChrome>
        <shell:WindowChrome CaptionHeight="40"
                            ResizeBorderThickness="0"
                            GlassFrameThickness="0"
                            CornerRadius="0" />
    </shell:WindowChrome.WindowChrome>

    <Border Background="#1E1E1E" CornerRadius="12" BorderBrush="#333" BorderThickness="1" Margin="0,0,0,-119">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="40"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="60"/>
            </Grid.RowDefinitions>

            <Grid.Resources>
                <!-- Slim ScrollBar Style -->
                <Style TargetType="ScrollBar">
                    <Setter Property="Width" Value="6"/>
                    <Setter Property="Background" Value="Transparent"/>
                    <Setter Property="Template">
                        <Setter.Value>
                            <ControlTemplate TargetType="ScrollBar">
                                <Grid Background="Transparent">
                                    <Track x:Name="PART_Track" IsDirectionReversed="true">
                                        <Track.Thumb>
                                            <Thumb>
                                                <Thumb.Template>
                                                    <ControlTemplate TargetType="Thumb">
                                                        <Border CornerRadius="3" Background="#555" Margin="1"/>
                                                    </ControlTemplate>
                                                </Thumb.Template>
                                            </Thumb>
                                        </Track.Thumb>
                                    </Track>
                                </Grid>
                            </ControlTemplate>
                        </Setter.Value>
                    </Setter>
                </Style>

                <!-- ComboBox Style (dark, no-white) -->
                <Style TargetType="ComboBox">
                    <Setter Property="Foreground" Value="#EEE"/>
                    <Setter Property="Background" Value="#2D2D2D"/>
                    <Setter Property="BorderBrush" Value="#444"/>
                    <Setter Property="BorderThickness" Value="1"/>
                    <Setter Property="Padding" Value="8,5"/>
                    <Setter Property="ScrollViewer.HorizontalScrollBarVisibility" Value="Disabled"/>
                    <Setter Property="ScrollViewer.VerticalScrollBarVisibility" Value="Auto"/>
                    <Setter Property="Template">
                        <Setter.Value>
                            <ControlTemplate TargetType="ComboBox">
                                <Grid>
                                    <!-- outer border uses ComboBox props -->
                                    <Border x:Name="MainBorder"
                                            CornerRadius="4"
                                            Background="{TemplateBinding Background}"
                                            BorderBrush="{TemplateBinding BorderBrush}"
                                            BorderThickness="{TemplateBinding BorderThickness}"
                                            SnapsToDevicePixels="True">

                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="28"/>
                                            </Grid.ColumnDefinitions>

                                            <!-- Click surface -->
                                            <ToggleButton x:Name="ToggleButton"
                                                          Grid.ColumnSpan="2"
                                                          Focusable="False"
                                                          Background="Transparent"
                                                          BorderThickness="0"
                                                          IsChecked="{Binding IsDropDownOpen, Mode=TwoWay, RelativeSource={RelativeSource TemplatedParent}}"
                                                          ClickMode="Press"/>

                                            <!-- Selected content -->
                                            <ContentPresenter x:Name="ContentSite"
                                                              Grid.Column="0"
                                                              Margin="{TemplateBinding Padding}"
                                                              VerticalAlignment="Center"
                                                              HorizontalAlignment="Left"
                                                              IsHitTestVisible="False"
                                                              Content="{TemplateBinding SelectionBoxItem}"
                                                              ContentTemplate="{TemplateBinding SelectionBoxItemTemplate}"
                                                              ContentTemplateSelector="{TemplateBinding ItemTemplateSelector}"
                                                              RecognizesAccessKey="True"/>

                                            <!-- Arrow -->
                                            <Path Grid.Column="1"
                                                  HorizontalAlignment="Center"
                                                  VerticalAlignment="Center"
                                                  Data="M 0 0 L 4 4 L 8 0 Z"
                                                  Fill="#888"
                                                  IsHitTestVisible="False"/>
                                        </Grid>
                                    </Border>

                                    <!-- Dropdown -->
                                    <Popup x:Name="PART_Popup"
                                           Placement="Bottom"
                                           IsOpen="{TemplateBinding IsDropDownOpen}"
                                           AllowsTransparency="True"
                                           Focusable="False"
                                           PopupAnimation="Slide">
                                        <Grid MinWidth="{TemplateBinding ActualWidth}"
                                              MaxHeight="{TemplateBinding MaxDropDownHeight}"
                                              SnapsToDevicePixels="True">
                                            <Border x:Name="DropDownBorder"
                                                    Background="{TemplateBinding Background}"
                                                    BorderBrush="{TemplateBinding BorderBrush}"
                                                    BorderThickness="1"
                                                    CornerRadius="4"/>

                                            <ScrollViewer Margin="4,6,4,6"
                                                          SnapsToDevicePixels="True"
                                                          VerticalScrollBarVisibility="{TemplateBinding ScrollViewer.VerticalScrollBarVisibility}">
                                                <ItemsPresenter KeyboardNavigation.DirectionalNavigation="Contained"
                                                                SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"/>
                                            </ScrollViewer>
                                        </Grid>
                                    </Popup>
                                </Grid>

                                <ControlTemplate.Triggers>
                                    <Trigger Property="IsEnabled" Value="False">
                                        <Setter TargetName="MainBorder" Property="Opacity" Value="0.55"/>
                                    </Trigger>

                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter TargetName="MainBorder" Property="BorderBrush" Value="#555"/>
                                    </Trigger>

                                    <Trigger Property="IsDropDownOpen" Value="True">
                                        <Setter TargetName="MainBorder" Property="BorderBrush" Value="#666"/>
                                    </Trigger>
                                </ControlTemplate.Triggers>
                            </ControlTemplate>
                        </Setter.Value>
                    </Setter>
                </Style>

                <!-- ComboBoxItem Style -->
                <Style TargetType="ComboBoxItem">
                    <Setter Property="Foreground" Value="#EEE"/>
                    <Setter Property="Background" Value="#2D2D2D"/>
                    <Setter Property="BorderThickness" Value="0"/>
                    <Setter Property="Padding" Value="8,5"/>
                    <Setter Property="Template">
                        <Setter.Value>
                            <ControlTemplate TargetType="ComboBoxItem">
                                <Border x:Name="Bd"
                                        CornerRadius="3"
                                        Background="{TemplateBinding Background}"
                                        Padding="{TemplateBinding Padding}"
                                        SnapsToDevicePixels="True">
                                    <ContentPresenter/>
                                </Border>
                                <ControlTemplate.Triggers>
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter TargetName="Bd" Property="Background" Value="#4A9EFF"/>
                                        <Setter Property="Foreground" Value="#FFF"/>
                                    </Trigger>
                                    <Trigger Property="IsSelected" Value="True">
                                        <Setter TargetName="Bd" Property="Background" Value="#3D3D3D"/>
                                        <Setter Property="Foreground" Value="#4A9EFF"/>
                                    </Trigger>
                                </ControlTemplate.Triggers>
                            </ControlTemplate>
                        </Setter.Value>
                    </Setter>
                </Style>
            </Grid.Resources>

            <!-- Title Bar -->
            <Grid Grid.Row="0">
                <TextBlock Text="AYARLAR"
                           VerticalAlignment="Center"
                           HorizontalAlignment="Left"
                           Margin="20,0,0,0"
                           Foreground="#888"
                           FontWeight="Bold"
                           FontSize="12"/>

                <Button Content="✕"
                        HorizontalAlignment="Right"
                        Width="40" Height="40"
                        Background="Transparent"
                        Foreground="#EEE"
                        BorderThickness="0"
                        Click="CloseButton_Click"
                        shell:WindowChrome.IsHitTestVisibleInChrome="True"/>
            </Grid>

            <!-- Settings Content -->
            <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto" Margin="20,10">
                <StackPanel>

                    <!-- Video Ayarları -->
                    <TextBlock Text="Video Ayarları"
                               Foreground="#4A9EFF"
                               FontWeight="SemiBold"
                               FontSize="14"
                               Margin="0,0,0,10"/>

                    <Grid Margin="0,5">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="120"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Text="FPS:" Foreground="#CCC" VerticalAlignment="Center"/>
                        <ComboBox Grid.Column="1" x:Name="FpsCombo" SelectedIndex="1">
                            <ComboBoxItem Content="24"/>
                            <ComboBoxItem Content="30"/>
                            <ComboBoxItem Content="60"/>
                        </ComboBox>
                    </Grid>

                    <Grid Margin="0,5">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="120"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Text="Kalite:" Foreground="#CCC" VerticalAlignment="Center"/>
                        <ComboBox Grid.Column="1" x:Name="QualityCombo" SelectedIndex="1">
                            <ComboBoxItem Content="Düşük (2 Mbps)"/>
                            <ComboBoxItem Content="Orta (4 Mbps)"/>
                            <ComboBoxItem Content="Yüksek (8 Mbps)"/>
                            <ComboBoxItem Content="Çok Yüksek (16 Mbps)"/>
                        </ComboBox>
                    </Grid>

                    <Grid Margin="0,5">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="120"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Text="Çözünürlük:" Foreground="#CCC" VerticalAlignment="Center"/>
                        <ComboBox Grid.Column="1" x:Name="ResolutionCombo" SelectedIndex="0">
                            <ComboBoxItem Content="Ekran Boyutu (Varsayılan)"/>
                            <ComboBoxItem Content="1920x1080"/>
                            <ComboBoxItem Content="1280x720"/>
                            <ComboBoxItem Content="854x480"/>
                        </ComboBox>
                    </Grid>

                    <!-- Kayıt Konumu -->
                    <TextBlock Text="Kayıt Konumu"
                               Foreground="#4A9EFF"
                               FontWeight="SemiBold"
                               FontSize="14"
                               Margin="0,20,0,10"/>

                    <Grid Margin="0,5">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="80"/>
                        </Grid.ColumnDefinitions>

                        <TextBox x:Name="OutputPathTextBox"
                                 Background="#2D2D2D"
                                 Foreground="#EEE"
                                 Padding="8,5"
                                 BorderBrush="#444"
                                 BorderThickness="1"
                                 IsReadOnly="True"/>

                        <Button Grid.Column="1"
                                Content="Gözat"
                                Margin="5,0,0,0"
                                Click="BrowseButton_Click"
                                Background="#3D3D3D"
                                Foreground="#EEE"
                                BorderThickness="0"
                                Padding="10,5"/>
                    </Grid>

                    <!-- Ses Ayarları -->
                    <TextBlock Text="Ses Ayarları"
                               Foreground="#4A9EFF"
                               FontWeight="SemiBold"
                               FontSize="14"
                               Margin="0,20,0,10"/>

                    <CheckBox x:Name="SystemAudioCheck" Content="Sistem Sesini Kaydet" Foreground="#CCC" IsChecked="True" Margin="0,5"/>
                    <CheckBox x:Name="MicrophoneCheck" Content="Mikrofonu Kaydet" Foreground="#CCC" IsChecked="False" Margin="0,5"/>
                    <CheckBox x:Name="ConfirmSaveCheck" Content="Kayıt Durdurulduğunda 'Farklı Kaydet' Penceresini Göster" Foreground="#CCC" IsChecked="True" Margin="0,5"/>
                    <CheckBox x:Name="ShowNotificationsCheck" Content="Bildirimler Göster (Tepsiye küçülme vb.)" Foreground="#CCC" IsChecked="True" Margin="0,5"/>
                    <CheckBox x:Name="StartInTrayCheck" Content="Uygulama Başlatıldığında Tepsiye Küçült" Foreground="#CCC" IsChecked="False" Margin="0,5"/>

                    <!-- Kısayollar -->
                    <TextBlock Text="Klavye Kısayolu"
                               Foreground="#4A9EFF"
                               FontWeight="SemiBold"
                               FontSize="14"
                               Margin="0,20,0,10"/>
                    <TextBlock Text="Kayıt Başlat/Durdur: Ctrl + Shift + R" Foreground="#888" FontSize="12"/>

                </StackPanel>
            </ScrollViewer>

            <!-- Buttons -->
            <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right" Margin="20,10">
                <Button Content="İptal"
                        Width="80" Height="35"
                        Margin="0,0,10,0"
                        Click="CancelButton_Click"
                        Background="#3D3D3D"
                        Foreground="#EEE"
                        BorderThickness="0"/>
                <Button Content="Kaydet"
                        Width="80" Height="35"
                        Click="SaveButton_Click"
                        Background="#4A9EFF"
                        Foreground="#FFF"
                        BorderThickness="0"/>
            </StackPanel>
        </Grid>
    </Border>
</Window>
